### Assumes current directory is: core/smartbody/sbm/bin
### Simple Template Seq Script
### Assumes this seq script is put under ../smartbody/test_suite directory

# ---- Loading data/sbm-common assets
0	path seq ../../../../data/sbm-common/scripts
0	path ME ../../../../data/sbm-common/common-sk
0	path ME ../../../../test_suite/input/test-speech-audiofile/data
0   path audio ../../../../data/sbm-test/speech_audio/
0	echo >>> Loading common motions and poses...
0	load motions -R ../../../../data/sbm-common/common-sk
0	load skeletons -R ../../../../data/sbm-common/common-sk
0	load poses   -R ../../../../data/sbm-common/common-sk

# ---- Using virtual timing
0	time sleepfps 0
0	time simfps 60
0	time reset

# ---- Setting characters and default posture
1	seq init-common-face
2	char doctor init common.sk SasoBase.SasoDoctorPerez
2	set character doctor world_offset x 0 y 102 h 0
2 char doctor smoothbindweight ../../../../data/mesh/doctor/Doctor.xml
2 char doctor smoothbindmesh ../../../../data/mesh/doctor/faceShape.obj
2 char doctor smoothbindmesh ../../../../data/mesh/doctor/left_handShape.obj
2 char doctor smoothbindmesh ../../../../data/mesh/doctor/pantsShape.obj
2 char doctor smoothbindmesh ../../../../data/mesh/doctor/polySurfaceShape10.obj
2 char doctor smoothbindmesh ../../../../data/mesh/doctor/right_handShape.obj
2 char doctor smoothbindmesh ../../../../data/mesh/doctor/shirtShape.obj
2	set test character doctor
2	test bml character doctor noecho posture LHandOnHip_Motex
2	char doctor viewer 4


# ---- Setting Camera Parameters
# * Assumes doctor scaled character standing near the origin, as is about 200 units tall
3	viewer open   600 600  400 50
3	camera eye    0 180 80
3	camera center 0 160 0
3	pawn camera init loc 0 166 185
3	set pawn camera world_offset x 0 y 166 z 185
3   set char doctor voice audiofile boy

# ---- Register motion events
3 addevent HandsAtSide_RArm_GestureYou 0.5 motionSpeech "hey"
3 addevent LHandOnHip_RArm_SweepRight 0.3 motionSpeech "no"
3 addevent LHandOnHip_Arms_GestureWhy 0.3 motionSpeech "hello"
3 registerevent motionSpeech "test bml char doctor speech ref $1"

4 bml char doctor <animation name="HandsAtSide_RArm_GestureYou"/>
4.7 snapshot
6 bml char doctor <animation name="LHandOnHip_RArm_SweepRight"/>
6.5 snapshot
8 bml char doctor <animation name="LHandOnHip_Arms_GestureWhy"/>
8.5 snapshot
9 quit
