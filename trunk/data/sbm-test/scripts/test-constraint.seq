### Assumes current directory is: core/smartbody/sbm/bin
### Constraint Test Seq Script

# ---- Loading data/sbm-common assets
0	path seq ../../../../data/sbm-common/scripts
0	path ME ../../../../data/sbm-common/common-sk
0	echo >>> Loading common motions and poses...
0	load motions -R ../../../../data/sbm-common/common-sk
0	load poses   -R ../../../../data/sbm-common/common-sk

# ---- Using virtual timing
#0	time sleepfps 0
#0	time simfps 60
#0	time reset

# ---- Setting characters and default posture
#  Common-sk assets are centered on the pelvis,
#  placed 102 units above the ground plane.
#  Using Unia (Unreal-based) class names for renderer assets
#  Using remote rVoice speech synthesis
#  NOTE: increment time to insure common-init is processed in order.
1	char doctor init common.sk SasoBase.SasoDoctorPerez
1	set character doctor world_offset x 35 y 102 h -17
1	set character doctor voice remote M021

#  Using "test bml" command to avoid hard-coding
#  message id into sequence file.
1  test bml character doctor noecho posture LHandOnHip_Motex

# ---- Setting Camera Parameters
# * Assumes doctor scaled character standing near the origin, as is about 200 units tall
1	viewer open   600 600  400 50
1	camera eye    0 70 240
1	camera center 40 70 0
1	pawn camera init loc 0 166 185
1	set pawn camera world_offset x 0 y 166 z 185
1	set test character doctor

# ---- Testing constraint
1 pawn foo init
1 set pawn foo world_offset x 60 y 120 z 30
1 pawn foo1 init
1 set pawn foo1 world_offset x 10 y 120 z 20
1 pawn foo2 init
1 set pawn foo2 world_offset x -200 y 120 z 100
1 pawn foo3 init
1 set pawn foo3 world_offset x 300 y 120 z -200
3 bml char doctor <body posture="ChrUtah_LeanForward001"/>
11 bml char doctor <gaze target="foo2"/>
16 bml char doctor <sbm:constraint sbm:handle="cdoctor" effector="r_wrist" target="foo1"/>
16 bml char doctor <sbm:constraint sbm:handle="cdoctor" effector="l_wrist" target="foo"/>
17 bml char doctor <sbm:constraint sbm:handle="cdoctor" sbm:fade-in="0.5"/>
20 bml char doctor <gaze target="foo3"/>


